<navigation-bar title="拼团详情" back="{{true}}" color="#fff" background="#E02E24"></navigation-bar>
<scroll-view class="scroll-area" scroll-y>
  <view class="detail-page" wx:if="{{goods}}">
    <!-- Use goods-card to display current group info consistent with list -->
    <view class="goods-card-wrapper">
      <goods-card item="{{goods}}" bind:buy="handleBuyClick"></goods-card>
    </view>

    <view class="share-section">
      <button class="share-btn" open-type="share">分享给微信好友</button>
    </view>
    
    <view class="detail-content">
      <view class="detail-benefit">
        <view class="benefit-item">拼团满2人立减</view>
        <view class="benefit-item">平台补贴频道专享</view>
        <view class="benefit-item">7天无忧退换</view>
      </view>

      <view class="order-link-section" wx:if="{{goods.order_link}}">
        <view class="order-link-title">下单链接</view>
        <view class="order-link-text">{{goods.order_link}}</view>
        <view class="order-link-actions">
          <view class="order-link-btn" bindtap="onCopyOrderLink">复制链接</view>
        </view>
      </view>
    </view>

    <!-- Related Group Buy Section -->
    <view class="related-section" wx:if="{{relatedGoods.length > 0}}">
      <view class="divider-header">
        <view class="divider-line"></view>
        <text class="divider-text">相关拼团</text>
        <view class="divider-line"></view>
      </view>
      
      <view class="related-list">
        <block wx:for="{{relatedGoods}}" wx:key="id">
          <goods-card item="{{item}}" bind:buy="handleBuyClick"></goods-card>
        </block>
      </view>
    </view>
  </view>
</scroll-view>
